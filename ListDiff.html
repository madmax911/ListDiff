<!doctype html><html lang="en"> <!--         All code written by Max Calcagno - maxone44@hotmail.com         --> <head>
                <meta charset="utf-8"> <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
       <meta http-equiv="Expires" content="0"/><meta http-equiv="Pragma" content="no-cache"/> <title> ListDiff </title>

                                                                                                <style type="text/css">
/*---------------------------------------------------------------------------------------------*/

  /* * { border-width: 1px; border-style: solid; border-color: black; } */

  body { font-family: 'monospace'; }

  html { height: 99%; }
  body { height: 97%; width: 98%; }

  table    { width: 100%; height: 100%; }
  textarea { width: 100%; height: 44vh; }

  button { margin: 4px; }

  .ctrv { text-align: center; width: 1px;
          vertical-align: middle; }

  .ctrh { text-align: center; height: 1px;
          vertical-align: middle;
          white-space: nowrap; }

/*----------------------------------------------------------------------------------------------*/</style></head><body>

<table>
  <tr><td><textarea id="tlt"></textarea></td>
    <td class="ctrv">
      <button type="button" onclick="DiffText()">Difference</button>
      <button type="button" onclick="CommonText()">Common</button>
      <button type="button" onclick="MergeText()">Merge</button>
      <button type="button" onclick="GetDaysLater()">Days later</button>
      <button type="button" onclick="GetDateDiff()">Date diff</button>
    </td>
    <td>
      <textarea id="trt"></textarea>
    </td>
  </tr>
  <tr>
    <td class="ctrh">
      <button type="button" onclick="CountText()">Count</button>
      <button type="button" onclick="SortText()">Sort</button>
      <button type="button" onclick="SortUniqText()">Sort + uniq</button>
      <button type="button" onclick="UniqText()">Uniq</button>
      <button type="button" onclick="OddEvenText()">Odd/Even</button>
    </td>
    <td class="ctrh">
      
    </td>
    <td class="ctrh">
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <button type="button" onclick="LowerCase()">Lower case</button>
      <button type="button" onclick="UpperCase()">Upper case</button>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
  <tr>
    <td>
      <textarea id="blt"></textarea>
    </td>
    <td class="ctrv">
      <button type="button" onclick="ReverseText()">Reverse</button>
      <button type="button" onclick="Tab2Enter()">Tab -&gt; enter</button>
      <button type="button" onclick="Enter2Tab()">Enter -&gt; tab</button>
      <button type="button" onclick="Tab2Space()">Tab -&gt; space</button>
      <button type="button" onclick="Space2Tab()">Space -&gt; tab</button>
    </td>
    <td>
      <textarea id="brt"></textarea>
    </td>
  </tr>
</table>

<!--========================================================================================================--><script>

function Tab2Enter()
{
  brt.value = blt.value.replace(/\t/g, '\n');
}

function Enter2Tab()
{                             //  \r for win
  brt.value = blt.value.replace(/[\r]/g, '').replace(/[\n]/g, '\t');
}

function Tab2Space()
{
  brt.value = blt.value.replace(/\t/g, ' ');
}

function Space2Tab()
{
  brt.value = blt.value.replace(/ /g, '\t');
}

function GetDateDiff()
{
  blt.value = Math.round(Math.abs((new Date(tlt.value) - new Date(trt.value)) / 1000 / 60 / 60 / 24));
}

function GetDaysLater()           //  Tip:  .toLocaleDateString()  mm/dd/yyyy
{
  brt.value = new Date((new Date(tlt.value)).valueOf() + parseFloat(trt.value) * 1000 * 60 * 60 * 24);
}

function DiffText()  //  blt = bottom left text
{
  blt.value = tlt.value.split('\n').filter(t => !trt.value.split('\n').includes(t)).join('\n');
  brt.value = trt.value.split('\n').filter(t => !tlt.value.split('\n').includes(t)).join('\n');
}

function CommonText()
{
  blt.value = tlt.value.split('\n').filter(t => trt.value.split('\n').includes(t)).join('\n');
}

function MergeText()
{
  blt.value = MergeArrays(tlt.value.split('\n'), trt.value.split('\n')).join('\n');
}

  function MergeArrays(a1, a2)
  {
    let a3 = [];

    a1.forEach((v,i) => { a3[i * 2] = v });
    a2.forEach((v,i) => { a3[i * 2 + 1] = v });

    return a3.filter(v => v);
  }

function CountText()
{
  blt.value = tlt.value.split('\n').length;
}

function SortText()
{
  blt.value = tlt.value.split('\n').sort().join('\n');
}

function SortUniqText()
{
  blt.value = [...(new Set(tlt.value.split('\n').sort()))].join('\n');
}

function UniqText()
{
  blt.value = [...(new Set(tlt.value.split('\n')))].join('\n');
}

function OddEvenText()
{
  blt.value = tlt.value.split('\n').filter((t,i) => (i % 2 === 0)).join('\n');  // even line
  brt.value = tlt.value.split('\n').filter((t,i) => (i % 2 === 1)).join('\n');  // odd line
}

function LowerCase()
{
  brt.value = trt.value.toLowerCase();
}

function UpperCase()
{
  brt.value = trt.value.toUpperCase();
}

function ReverseText()
{
  brt.value = blt.value.split('\n').reverse().join('\n');
}

/*--------------------------------------------------------------------------------------------*/</script></body></html>
